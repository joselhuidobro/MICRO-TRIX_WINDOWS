/*───────────────────────────────────
 *  ████████╗██████╗ ██╗██╗  ██╗    
 *  ╚══██╔══╝██╔══██╗██║╚██╗██╔╝   
 *     ██║   ██████╔╝██║ ╚███╔╝     
 *     ██║   ██╔══██╗██║ ██╔██╗     
 *     ██║   ██║  ██║██║██╔╝ ██╗    
 *     ╚═╝   ╚═╝  ╚═╝╚═╝╚═╝  ╚═╝   
 *──────────────────────────────────


┌────────────┐        docker exec / websockets          ┌──────────────┐
│  flask_ui  │  ───────────────────────────────────▶     │  idf_build   │
│  (API +    │                                          │  (ROS2 +     │
│  dashboard)│  ◀────────── TCP/UDP (ROS2) ───────────▶│  ESP-IDF)    │
└────────────┘                                          └──────────────┘
         ▲                                                      │
         │                XRCE-DDS / FastDDS                    │USB
         │                                                      ▼
         │                                              ESP32 (flasheo)
         │              ┌──────────────────┐        
         └───────────────► micro_ros_agent 
                        └──────────────────┘







 ROS 2 Humble + ESP‑IDF v5.1 + micro‑ROS Agent +
Middleware: XRCE-DDS
usar micro-ROS con un transporte específico (por ejemplo, UART o Wi-Fi



#define CONFIG_MICRO_ROS_ESP_XRCE_DDS_MIDDLEWARE 1  // Using XRCE-DDS
#define CONFIG_MICRO_ROS_ESP_NETIF_WLAN 1           // WiFi transport
#define CONFIG_MICRO_ROS_AGENT_IP "192.168.0.82"    // Jetson IP
#define CONFIG_MICRO_ROS_AGENT_PORT "8888"          // Default port

 *      • Target : ESP32-WROOM-32 • ESP-IDF v5.1.6-680-g7bc49c1227 (release/5.1)
 *  ◼ Docker Image
 *      • Base   : ros:humble-ros-base-jammy (Ubuntu 22.04 + ROS 2 Humble)
 *      • Tag    : esp-dev (Built by the project Dockerfile)


PARA ESP32 ESPRESSIFF DEL MODULE

Este Dockerfile crea una imagen basada en ros:humble-ros-base-jammy (Ubuntu 22.04 con ROS 2 Humble ya instalado) 
y la amplía para ofrecer un entorno de desarrollo integrado para proyectos que combinan ROS 2 y firmware ESP32

Este Dockerfile crea un entorno de desarrollo
ESP-IDF v5.1.6-680-g7bc49c1227

✅ Versión de ESP-IDF: release/v5.1 (correcta para desarrollo actual).
✅ Dependencias instaladas: Todas las necesarias (git, cmake, ninja, python3, gcc-arm-none-eabi, etc.).
✅ Estructura del proyecto: Copia tu código en /esp2024 y compila con idf.py build.
✅ Componente         espressif__pid_ctrl version v0.1.1
    Componente espressif__mpu6050 1.2.0
PID tien pe programado anti windup


/trix_docker_stack                     # ← carpeta raíz de tu stack 2025
├── docker-compose.yml                 # Orquesta los contenedores (UI, IDF/ROS 2, Agent)
├── .env                               # Variables globales (ROS_DOMAIN_ID, PUERTOS, etc.)
│
├── esp-docker-jetson-encoder_motor_ui # Contenedor de firmware (ESP‑IDF 5.1 + ROS 2 Humble)
│   ├── Dockerfile
│   ├── sdkconfig.defaults
│   ├── CMakeLists.txt                 # Proyecto raíz IDF
│   ├── main/
│   │   ├── main.cpp
│   │   └── CMakeLists.txt
│   ├── components/                    # TODOS los componentes IDF (nativos + custom)
│   │   ├── arduino-esp32/
│   │   │   ├── CMakeLists.txt
│   │   │   ├── idf_component.yml
│   │   │   └── libraries/
│   │   │       └── ArduinoOTA/
│   │   │           ├── src/
│   │   │           └── library.properties
│   │   ├── espressif__pid_ctrl/
│   │   │   ├── include/pid_ctrl.h
│   │   │   ├── pid_ctrl.c
│   │   │   └── CMakeLists.txt
│   │   ├── i2c_bus/
│   │   │   ├── include/i2c_bus.h
│   │   │   ├── src/
│   │   │   │   ├── i2c_bus.c
│   │   │   │   ├── i2c_bus_soft.c
│   │   │   │   └── i2c_bus_v2.c
│   │   │   ├── CMakeLists.txt
│   │   │   └── idf_component.yml
│   │   ├── micro_ros_espidf_component/
│   │   │   ├── include/micro_ros_utilities/
│   │   │   ├──
                micro_ros_src/src/rcl/rcl/…
                       └─ include/rcl/rcl.h   ← cabeceras
                       └─ src/rcl/*.c         ← código

│   │   │   ├── colcon.meta
│   │   │   └── CMakeLists.txt
│   │   ├── mpu6050/
│   │   │   ├── include/mpu6050.h
│   │   │   ├── src/mpu6050.c
│   │   │   ├── CMakeLists.txt
│   │   │   └── idf_component.yml
│   │   ├── network_interfaces/
│   │   │   ├── include/
│   │   │   ├── src/
│   │   │   ├── colcon.meta
│   │   │   ├── CMakeLists.txt
│   │   │   └── idf_component.yml
│   │   ├── pid_ctrl/
│   │   │   ├── include/pid_ctrl.h
│   │   │   ├── src/pid_ctrl.c
│   │   │   ├── CMakeLists.txt
│   │   │   └── idf_component.yml
│   │   ├── trix_PID/
│   │   │   ├── include/trix_PID.h
│   │   │   ├── trix_PID.c
│   │   │   └── CMakeLists.txt
│   │   ├── trix_kalman_filter/
│   │   │   ├── include/trix_kalman_filter.h
│   │   │   ├── trix_kalman_filter.c
│   │   │   └── CMakeLists.txt
│   │   ├── trix_transport/
│   │   │   ├── include/esp_udp_transport.h
│   │   │   ├── esp_udp_transport.c
│   │   │   ├── colcon.meta
│   │   │   └── CMakeLists.txt
│   │   └── trix_wifi_connection/
│   │       ├── include/trix_wifi_connection.h
│   │       ├── trix_wifi_connection.c
│   │       └── CMakeLists.txt
└── 2025_DOCKER-dronui                # Contenedor de la UI (Flask + Three.js, etc.)
    ├── Dockerfile
    ├── requirements.txt
    ├── app/
    │   ├── app.py
    │   ├── templates/
    │   │   ├── layout.html
    │   │   └── index.html
    │   └── static/
    │       ├── css/
    │       ├── js/
    │       └── 3d_models/
    │           └── basic_dron.glb
    └── README.md








